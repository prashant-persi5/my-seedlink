(function(t){function e(e){for(var r,a,o=e[0],u=e[1],c=e[2],l=0,p=[];l<o.length;l++)a=o[l],Object.prototype.hasOwnProperty.call(i,a)&&i[a]&&p.push(i[a][0]),i[a]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(t[r]=u[r]);d&&d(e);while(p.length)p.shift()();return n.push.apply(n,c||[]),s()}function s(){for(var t,e=0;e<n.length;e++){for(var s=n[e],r=!0,o=1;o<s.length;o++){var u=s[o];0!==i[u]&&(r=!1)}r&&(n.splice(e--,1),t=a(a.s=s[0]))}return t}var r={},i={app:0},n=[];function a(e){if(r[e])return r[e].exports;var s=r[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,a),s.l=!0,s.exports}a.m=t,a.c=r,a.d=function(t,e,s){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(a.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)a.d(s,r,function(e){return t[e]}.bind(null,r));return s},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],u=o.push.bind(o);o.push=e,o=o.slice();for(var c=0;c<o.length;c++)e(o[c]);var d=u;n.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("56d7")},"109b":function(t,e,s){"use strict";var r=s("a5ff"),i=s.n(r);i.a},"56d7":function(t,e,s){"use strict";s.r(e);s("cadf"),s("551c"),s("f751"),s("097d");var r=s("2b0e"),i=s("289d"),n=(s("5abe"),s("15f5"),s("7051"),s("8aa5")),a=s.n(n),o={apiKey:"AIzaSyAI2sYOT43eVEQ-hF1iBQw0v727-B3CWd8",authDomain:"my-reddit-f3a80.firebaseapp.com",databaseURL:"https://my-reddit-f3a80.firebaseio.com",projectId:"my-reddit-f3a80",storageBucket:"my-reddit-f3a80.appspot.com",messagingSenderId:"144125486566",appId:"1:144125486566:web:7ef1e9105d55ca4b132227"};a.a.initializeApp(o);var u=a.a,c=s("2f62"),d=s("3317"),l=(s("96cf"),s("3b8d")),p=u.firestore();p.settings={timestampsInSnapshots:!0};var f=p,m={user:{},isLoggedIn:!1},b={setUser:function(t,e){e?(t.user=e,t.isLoggedIn=!0):(t.user={},t.isLoggedIn=!1)}},h={login:function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=new u.auth.GoogleAuthProvider,t.next=3,u.auth().signInWithPopup(e);case 3:case"end":return t.stop()}}),t)})));function e(){return t.apply(this,arguments)}return e}(),logout:function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,u.auth().signOut();case 2:case"end":return t.stop()}}),t)})));function e(){return t.apply(this,arguments)}return e}()},v={namespaced:!0,state:m,mutations:b,actions:h},g={subreddits:[]},_={init:Object(d["a"])((function(t){var e=t.bindFirestoreRef;e("subreddits",f.collection("subreddits"))}))},y={namespaced:!0,state:g,actions:_},O=f.collection("posts"),C={subreddits:[],posts:[]},w={subreddit:function(t){return t.subreddits[0]?t.subreddits[0]:{}}},j={createPost:function(t,e){var s=t.getters,r=O.doc();e.id=r.id,e.subreddit_id=s.subreddit.id,e.user_id=u.auth().currentUser.uid,e.created_at=u.firestore.FieldValue.serverTimestamp(),e.updated_at=u.firestore.FieldValue.serverTimestamp(),O.doc(e.id).set(e)},initSubreddit:Object(d["a"])((function(t,e){var s=t.bindFirestoreRef;s("subreddits",f.collection("subreddits").where("name","==",e))})),initPosts:Object(d["a"])((function(t,e){var s=t.bindFirestoreRef;s("posts",O.where("subreddit_id","==",e))}))},P={namespaced:!0,state:C,actions:j,getters:w},x={users:[]},I={usersById:function(t){return t.users.reduce((function(t,e){return t[e.id]=e,t}),{})}},S={init:Object(d["a"])((function(t){var e=t.bindFirestoreRef;e("users",f.collection("users"))}))},k={namespaced:!0,state:x,actions:S,getters:I};r["a"].use(c["a"]);var L=new c["a"].Store({mutations:d["b"],modules:{auth:v,subreddits:y,subreddit:P,users:k}}),R=s("8c4f"),U=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"home"},[s("router-link",{staticClass:"button is-primary",attrs:{to:{name:"subreddits"}}},[t._v("\n    View subreddits\n  ")])],1)},T=[],$=s("2877"),F={},M=Object($["a"])(F,U,T,!1,null,null,null),E=M.exports,B=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("aside",{staticClass:"menu"},[s("p",{staticClass:"menu-label"},[t._v("Subreddits")]),s("ul",{staticClass:"menu-list"},t._l(t.subreddits,(function(e){return s("li",{key:e.id},[s("router-link",{attrs:{to:{name:"subreddit",params:{name:e.name}}}},[t._v("\n        "+t._s(e.name)+"\n      ")])],1)})),0)])},D=[],A={mounted:function(){this.init()},name:"subreddits",computed:Object(c["d"])("subreddits",["subreddits"]),methods:Object(c["b"])("subreddits",["init"])},V=A,z=(s("acdc"),Object($["a"])(V,B,D,!1,null,null,null)),G=z.exports,J=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("section",[s("h1",{staticClass:"pg-title title"},[t._v(t._s(t.subreddit.name))]),t.isLoggedIn?s("button",{staticClass:"button is-primary",on:{click:function(e){t.showForm=!t.showForm}}},[t._v("Toggle Post Form")]):t._e(),t.showForm&&t.isLoggedIn?s("form",{on:{submit:function(e){return e.preventDefault(),t.onCreatePost()}}},[s("b-field",{attrs:{label:"Title"}},[s("b-input",{attrs:{required:""},model:{value:t.post.title,callback:function(e){t.$set(t.post,"title",e)},expression:"post.title"}})],1),s("b-field",{attrs:{label:"Description"}},[s("b-input",{attrs:{type:"textarea"},model:{value:t.post.description,callback:function(e){t.$set(t.post,"description",e)},expression:"post.description"}})],1),s("b-field",{attrs:{label:"URL"}},[s("b-input",{attrs:{type:"url"},model:{value:t.post.URL,callback:function(e){t.$set(t.post,"URL",e)},expression:"post.URL"}})],1),s("button",{staticClass:"button is-success"},[t._v("Add Post")])],1):t._e(),s("div",{staticClass:"field has-addons search-section"},[s("div",{staticClass:"control"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.searchTerm,expression:"searchTerm"}],staticClass:"input",attrs:{type:"text",placeholder:"Search Posts"},domProps:{value:t.searchTerm},on:{input:function(e){e.target.composing||(t.searchTerm=e.target.value)}}})]),t._m(0)]),s("div",{staticClass:"posts"},t._l(t.filteredPosts,(function(e,r){return s("article",{key:e.id,staticClass:"media"},[s("figure",{staticClass:"media-left"},[s("p",{staticClass:"image is-64x64 user-avatar"},[s("img",{attrs:{src:t.loadedUsersById[e.user_id].image}})])]),s("div",{staticClass:"media-content"},[s("div",{staticClass:"content"},[s("p",[s("strong",[t._v(t._s(e.title))]),t._v("  \n            "),s("small",[t._v("@"+t._s(t.loadedUsersById[e.user_id].name))]),t._v("  \n            "),s("small",[t._v(t._s(t.getCreated(r)))]),s("br"),t._v("\n            "+t._s(e.description)+"\n          ")])]),t._m(1,!0)])])})),0)])},N=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"control"},[s("a",{staticClass:"button is-info"},[t._v("\n        Search\n      ")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("nav",{staticClass:"level is-mobile"},[s("div",{staticClass:"level-left"},[s("a",{staticClass:"level-item"},[s("span",{staticClass:"icon is-small"},[s("i",{staticClass:"fas fa-reply"})])]),s("a",{staticClass:"level-item"},[s("span",{staticClass:"icon is-small"},[s("i",{staticClass:"fas fa-retweet"})])]),s("a",{staticClass:"level-item"},[s("span",{staticClass:"icon is-small"},[s("i",{staticClass:"fas fa-heart"})])])])])}],Q=(s("8e6e"),s("ac6a"),s("456d"),s("4917"),s("3b2b"),s("bd86"));s("7f7f");function W(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,r)}return s}function q(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?W(s,!0).forEach((function(e){Object(Q["a"])(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):W(s).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var K={data:function(){return{showForm:!1,searchTerm:"",post:{title:"",description:"",URL:""}}},mounted:function(){this.initSubreddit(this.$route.params.name),this.initUsers()},watch:{"$route.params.name":function(){this.initSubreddit(this.$route.params.name)},subreddit:function(){this.subreddit.id&&this.initPosts(this.subreddit.id)}},computed:q({},Object(c["d"])("subreddit",["posts"]),{},Object(c["d"])("auth",["isLoggedIn","user"]),{},Object(c["c"])({subreddit:"subreddit/subreddit",usersById:"users/usersById"}),{loadedUsersById:function(){var t=this;return this.posts.reduce((function(e,s){return e[s.user_id]=t.usersById[s.user_id]||{name:"Loading...",image:"https://bulma.io/images/placeholders/128x128.png"},e}),{})},filteredPosts:function(){if(this.searchTerm){var t=new RegExp(this.searchTerm,"gi");return this.posts.filter((function(e){return(e.title+e.description).match(t)}))}return this.posts}}),methods:q({isImage:function(t){return t.match(/(png|jpg|jpeg|gif)$/)}},Object(c["b"])("subreddit",["createPost","initSubreddit","initPosts"]),{},Object(c["b"])("users",{initUsers:"init"}),{onCreatePost:function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.post.title&&(this.post.description||this.post.URL)&&(this.createPost(this.post),this.post={title:"",description:"",URL:""},this.showForm=!1);case 1:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getCreated:function(t){function e(t){var e=Math.floor((new Date-t)/1e3),s=Math.floor(e/31536e3);return s>1?s+" years":(s=Math.floor(e/2592e3),s>1?s+" months":(s=Math.floor(e/86400),s>1?s+" days":(s=Math.floor(e/3600),s>1?s+" hours":(s=Math.floor(e/60),s>1?s+" minutes":Math.floor(e)+" seconds"))))}var s=e(1e3*this.posts[t].created_at.seconds);return s<0?"0 seconds ago":s+" ago"}})},Y=K,H=(s("109b"),Object($["a"])(Y,J,N,!1,null,null,null)),X=H.exports;r["a"].use(R["a"]);var Z=new R["a"]({routes:[{path:"/",name:"home",component:E,meta:{title:"My Seedlink"}},{path:"/subreddits",name:"subreddits",component:G,meta:{title:"Subreddits"}},{path:"/r/:name",name:"subreddit",component:X,meta:{title:"Subreddit"}}]});u.auth().onAuthStateChanged((function(t){if(t){t.user&&(t=t.user);var e={id:t.uid,name:t.displayName,image:t.photoURL,created_at:u.firestore.FieldValue.serverTimestamp()};f.collection("users").doc(e.id).set(e),L.commit("auth/setUser",e),Z.push("/subreddits")}else L.commit("auth/setUser",null)}));var tt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"app"}},[s("nav",{staticClass:"navbar is-black",attrs:{role:"navigation","aria-label":"main navigation"}},[t._m(0),s("div",{staticClass:"navbar-end"},[s("div",{staticClass:"navbar-item"},[s("div",{staticClass:"field is-grouped"},[t.isLoggedIn?t._e():s("p",{staticClass:"control"},[s("a",{staticClass:"button",on:{click:function(e){return t.login()}}},[t._v("\n              Login with Google\n            ")])]),t.isLoggedIn?s("p",{staticClass:"control logged-in"},[s("section",{staticClass:"avatar"},[s("figure",[s("img",{attrs:{src:t.user.image}})]),s("figcaption",[t._v(t._s(t.user.name))])]),s("a",{staticClass:"button is-primary",on:{click:function(e){return t.logout()}}},[t._v("\n              Logout\n            ")])]):t._e()])])])]),s("router-view",{staticClass:"main container"})],1)},et=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"navbar-brand"},[s("a",{staticClass:"navbar-item",attrs:{href:"/#/"}},[t._v("\n        My Seedlink\n      ")])])}],st={computed:Object(c["d"])("auth",["user","isLoggedIn"]),methods:Object(c["b"])("auth",["login","logout"])},rt=st,it=(s("5c0b"),Object($["a"])(rt,tt,et,!1,null,null,null)),nt=it.exports;r["a"].config.productionTip=!1,r["a"].use(i["a"]),Z.beforeEach((function(t,e,s){document.title=t.meta.title,s()})),new r["a"]({router:Z,store:L,render:function(t){return t(nt)}}).$mount("#app")},"5c0b":function(t,e,s){"use strict";var r=s("e332"),i=s.n(r);i.a},a5ff:function(t,e,s){},ac72:function(t,e,s){},acdc:function(t,e,s){"use strict";var r=s("ac72"),i=s.n(r);i.a},e332:function(t,e,s){}});
//# sourceMappingURL=app.d3e04de2.js.map